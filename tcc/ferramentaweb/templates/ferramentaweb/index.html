<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PsicoSimula</title>
    {% load static %}
    <link rel="stylesheet" type="text/css" href="{% static 'ferramentasweb/styles.css' %}">
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;700&display=swap" rel="stylesheet">
</head>
<body>
    <div class="container">
        <div class="sidebar">
            <h1>PsicoSimula</h1>
            <div class="menu">
                <div class="menu-item">
                    <img src="{% static 'ferramentasweb/images/Vector2.png' %}" alt="Ícone Informações">
                    <h2>Informações</h2>
                </div>
                <div class="menu2">
                    <div class="menu-item2">
                        <img src="{% static 'ferramentasweb/images/Vector3.png' %}" alt="Ícone Informações">
                        <h2><a href="#" class="menu-link" id="refresh-link">Criar Novo Caso</a></h2>
                    </div>
                </div>
            </div>
            <div class="about">
                <div class="circle">
                    <img src="{% static 'ferramentasweb/images/psicosimula.png' %}" alt="Icon" />
                </div>
                <h3>Sobre</h3>
                <p>Explore e gere casos clínicos hipotéticos para estudo em psicopatologia com o poder da inteligência artificial generativa. Encontre respostas e recursos que você precisa.</p>
            </div>
        </div>
        <div class="main-content">
            <h2>Casos Hipotéticos</h2>
            <img id="raio-image" src="{% static 'ferramentasweb/images/Raio.png' %}" alt="Ícone Informações">
            <div class="chat-container">
                <div id="chat-box" class="hidden">
                    <div>
                        <img src="{% static 'ferramentasweb/images/Brilho.png' %}" alt="ícone Resultado" class="result-image"/>
                    </div>
                    <!-- Mensagens da conversa serão adicionadas aqui -->
                </div>
                <div class="input-container">
                    <textarea id="user-input" placeholder="Informe o caso clínico"></textarea>
                    <div class="button-container">
                        <button id="send-button" disabled>Simular</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const chatBox = document.getElementById('chat-box');
            const userInput = document.getElementById('user-input');
            const sendButton = document.getElementById('send-button');
            const resultBox = document.getElementById('result-box');
            const refreshLink = document.getElementById('refresh-link');
            const raioImage = document.getElementById('raio-image');

            refreshLink.addEventListener('click', function(event) {
                event.preventDefault(); 
                location.reload(); 
            });

            userInput.addEventListener('input', function() {
                if (userInput.value.trim() !== '') {
                    sendButton.disabled = false;
                } else {
                    sendButton.disabled = true;
                }
            });

            sendButton.addEventListener('click', function() {
                const userMessage = userInput.value.trim();
                if (userMessage !== '') {
                    addMessageToChat('user', userMessage);
                    processMessage(userMessage);
                    userInput.value = '';
                    sendButton.disabled = true;
                    chatBox.classList.remove('hidden'); // Mostra o chatbox
                    raioImage.style.display = 'none'; // Esconde a imagem de raio
                }
            });

            function addMessageToChat(sender, message) {
                const messageElement = document.createElement('div');
                messageElement.classList.add('message', sender);
                messageElement.textContent = message;
                chatBox.appendChild(messageElement);
                chatBox.scrollTop = chatBox.scrollHeight;
            }

            function processMessage(message) {
                // Simulação de chamada à API
                setTimeout(() => {
                    const responseMessage = `Resposta gerada para: "${message}"`;
                    addMessageToChat('bot', responseMessage);
                }, 1000);
            }
        });
    </script>
</body>
</html>
